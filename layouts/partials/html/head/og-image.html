{{/*
    Pinterest sizes: https://louisem.com/228434/pinterest-pin-size
    Open Graph sizees: https://iamturns.com/open-graph-image-size/
    */}}
{{- $ogHeight := 630 -}}
{{- if $.Site.Params.preview.size.height -}}
    {{- $ogHeight = $.Site.Params.preview.size.height -}}
{{- end -}}

{{- $ogWidth := 1200 -}}
{{- if $.Site.Params.preview.size.width -}}
    {{- $ogWidth = $.Site.Params.preview.size.width -}}
{{- end -}}

{{- if (templates.Exists "partials/preview-image.html") -}}
    {{- $previewImg := partial "preview-image.html" (dict "context" . "height" $ogHeight "width" $ogWidth) -}}
    {{- if not (or (eq $previewImg nil) (eq $previewImg "")) -}}
        <meta property="og:image" content="{{ $previewImg.Permalink }}" />
        <meta property="og:image:type" content="{{$previewImg.MediaType }}" />
        <meta property="og:image:width" content="{{ $ogWidth }}" />
        <meta property="og:image:height" content="{{ $ogHeight }}" />
    {{- else -}}
        {{- warnf "Can't generate preview for %s" .File.Path }}
    {{- end -}}
{{- end -}}
