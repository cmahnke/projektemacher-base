{{- $section := .Get "section" -}}
{{- $type := "" -}}
{{- with (.Get "type") -}}
  {{- $type = . -}}
{{- end -}}

{{- $posts := slice -}}
{{- if ne $type "" -}}
  {{- $posts = (where (where .Site.Pages "Section" $section) "Params.type" $type).Reverse -}}
{{- else -}}
  {{- $posts = (where .Site.Pages "Section" $section) -}}
{{- end -}}

{{- len $posts -}}
